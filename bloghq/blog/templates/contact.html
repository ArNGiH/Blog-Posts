{% extends "layout.html" %}

{% block content %}
<div class="container mt-5">
    <h1>Contact Us</h1>
    <p>We'd love to hear from you! Fill out the form below to send us a message.</p>

    <!-- Form -->
    <form method="post">
        {% csrf_token %}
        <div class="mb-3">
            <label for="id_name" class="form-label">Name</label>
            <input type="text" name="name" class="form-control" id="id_name" placeholder="Enter your name" required>
        </div>
        <div class="mb-3">
            <label for="id_email" class="form-label">Email address</label>
            <input type="email" name="email" class="form-control" id="id_email" placeholder="Enter your email" required>
        </div>
        <div class="mb-3">
            <label for="id_message" class="form-label">Message</label>
            <textarea name="message" class="form-control" id="id_message" rows="5" placeholder="Your message" required></textarea>
        </div>
        <button type="submit" class="btn btn-success">Send Message</button>
    </form>
</div>

<!-- Bootstrap Toast -->
<div class="position-fixed bottom-0 end-0 p-3" style="z-index: 11">
    <div id="successToast" class="toast" role="alert" aria-live="assertive" aria-atomic="true">
        <div class="toast-header">
            <strong class="me-auto">Success</strong>
            <small>Now</small>
            <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
        </div>
        <div class="toast-body bg-success text-white">
            Message sent successfully!
        </div>
        
    </div>
</div>

<!-- JavaScript to handle toast display and redirection -->
{% if messages %}
<script>
    document.addEventListener('DOMContentLoaded', function () {
        // Show the toast
        var toastEl = document.getElementById('successToast');
        var toast = new bootstrap.Toast(toastEl);
        toast.show();

        // After 3 seconds, redirect to the blog_list page
        setTimeout(function() {
            window.location.href = "{% url 'blog_list' %}";
        }, 2000);  // Adjust timing as needed
    });
</script>
{% endif %}
{% endblock %}
